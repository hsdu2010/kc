<section class="content-header">
    <h1>
        kafka管理<small>读Kafka</small>
    </h1>
    <ol class="breadcrumb">
        <li><a href="#"><i class="fa fa-home"></i> 首页</a></li>
        <li><a href="#"><i class="fa fa-tasks"></i> kafka管理</a></li>
        <li class="active"><i class="fa fa-gears"></i> 读Kafka</li>
    </ol>
</section>

<!-- 总体布局模式 .container-fluid 类用于100%宽度-->
<div class="content">
    <!-- 总体布局模式 .container-fluid 类用于100%宽度-->
    <div id="inner-content" class="container-fluid">
        <div id="inner-row" class="row">
            <div class="panel panel-default">
                <!-- panel面板主体 -->
                <div class="panel-body">
                    <div class="row">
                        <div class="col-md-12 col-xs-12 col-lg-12 col-sm-12 text-left"
                            id="kafkaReadManagerTableToolbar">
                            <button 
                                data-target=".bs-example-modal-lg"
                                class="btn btn-default" onclick="$.kafkaReadManagerUtils.button.add()">新增</button>
                            <form role="form" class="form-inline" id="searchForm" style="float:right;margin-left:10px;margin-bottom:16px;" onsubmit="$.kafkaReadManagerUtils.submit.search();return false;">
		                        <div class="form-group">
		                            <div class="input-group">
		                                <input type="text" class="form-control" name="name" placeholder="输入模块名搜索">
		                            </div>
		                        </div>
		
		                        <button type="button" class="btn btn-default"
		                            onclick="$.kafkaReadManagerUtils.submit.search()"><i class="glyphicon glyphicon-search"></i></button>
		                    </form>
                        </div>
                    </div>
                    <div class="row">
                        <div class="col-md-12 col-xs-12 col-lg-12 col-sm-12 panel-default">
                            <div class="panel panel-body">
                                <div class="panel-content">
                                    <table id="kafkaReadManagerTable" data-toggle="table"
                                        data-page-list="[10,20,30]" data-pagination="true"
                                        data-cache="false" data-detail-view="false"
                                        data-show-refresh="true" data-show-columns="false"
                                        data-filter-control="false" data-filter-show-clear="false"
                                        data-toolbar="#kafkaReadManagerTableToolbar"
                                        data-side-pagination="server">
                                        <thead>
                                            <tr>
                                                <th class="hidden" data-field="dbId"></th>
                                                <th data-field="name" data-align="center">模块名称</th>
                                                <th data-field="clusterId" data-align="center" data-formatter="$.kafkaReadManagerUtils.formatter.env">环境</th>
                                                <th data-field="topic" data-align="center">主题</th>
                                                <th data-field="createEmp" data-align="center">创建人</th>
                                                <th data-field="createtime" data-align="center">创建时间</th>
                                                <th data-field="operation" data-align="center" data-width="110"
                                                    data-formatter="$.kafkaReadManagerUtils.formatter.operation">操作</th>
                                            </tr>
                                        </thead>
                                    </table>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
            <!-- 新增 模态框 -->
            <div class="modal fade bs-example-modal-lg" id="addKafkaReadManagerDialog" role="dialog"
                aria-hidden="true" data-backdrop="static">
                <div class="modal-dialog modal-lg">
                    <div class="modal-content">
                        <div class="modal-header">
                            <button type="button" class="close" data-dismiss="modal"
                                aria-hidden="true">&times;</button>
                            <h4 class="modal-title">Kafka读取</h4>
                        </div>

                        <div class="modal-body" style="padding-top:0px;">
                            <div class="row-fluid">
                                <form class="form-horizontal" role="form" id="addKafkaReadManagerForm"
                                    novalidate="novalidate">
                                    <div>
                                        <input type="hidden" name="clusterId" id="clusterId"/>
                                        <input type="hidden" id="id" name="id" />
                                        <div class="col-xs-6"
                                        style="height: auto; padding-left: 0px;">
                                        <div style="margin-top: 10px; margin-bottom: 10px;">
                                            <strong>模块名称：</strong></div>
                                        <div class="input-group col-md-12 col-xs-12 col-lg-12 col-sm-12"  >
                                            <input type="text" class="form-control" name="name"
                                                id="name" 
                                                placeholder="必填"
                                                aria-required="true">
                                        </div>
                                    </div>
                                    <div class="col-xs-6"
                                        style="height: auto; padding-right: 0px;">

                                        <div style="margin-top: 10px; margin-bottom: 10px;">
                                                                                                                                 <strong>环境：</strong></div>
                                        <div
                                            class="input-group col-md-12 col-xs-12 col-lg-12 col-sm-12"  >
                                            <select id="envType" class="form-control"
                                                aria-invalid="false">
                                                <option value="sit-other">sit-other</option>
                                                <option value="sit-other2">sit-other2</option>
                                            </select>
                                        </div>
                                    </div>
                                    <div class="col-xs-6"
                                        style="height: auto; padding-left: 0px;">
                                        <div style="margin-top: 10px; margin-bottom: 10px;">
                                                                                                                                   <strong>主题：</strong></div>
                                        <div class="input-group col-md-12 col-xs-12 col-lg-12 col-sm-12"  >
                                            <input type="text" class="form-control" name="topic"
                                                id="topic" 
                                                placeholder="必填"
                                                aria-required="true" onblur="$.kafkaReadManagerUtils.button.queryTopic()">
                                        </div>
                                    </div>
                                    <div class="col-xs-6"
                                        style=" height: auto; padding-right: 0px;">
                                        <div style="margin-top: 10px; margin-bottom: 10px;">
                                                                                                                                   <strong>校验码：</strong></div>
                                        <div class="input-group col-md-12 col-xs-12 col-lg-12 col-sm-12"  >
                                            <input type="text" class="form-control" name="token"
                                                id="token" 
                                                aria-required="true" placeholder="必填">
                                        </div>
                                    </div>
                                    <div class="col-xs-6"
                                        style="height: auto; padding-left: 0px;">
                                        <div style="margin-top: 10px; margin-bottom: 10px;">
                                                                                                                                   <strong>筛选条件：</strong></div>
                                        <div class="input-group col-md-12 col-xs-12 col-lg-12 col-sm-12"  >
                                            <input type="text" class="form-control" name="filterCondition"
                                                id="filterCondition" 
                                                aria-required="true">
                                        </div>
                                    </div>

                                    <div class="col-xs-6"
                                        style="height: auto; padding-right: 0px;" id="deserializeWrap">
                                        <div style="margin-top: 10px; margin-bottom: 10px;">
                                                                                                                                   <strong>反序列化：</strong></div>
                                        <div class="input-group col-md-12 col-xs-12 col-lg-12 col-sm-12"  >
                                             <select name="deserialize" class="form-control" id="deserialize"
                                                aria-invalid="false">
                                                <option value="0" selected = "selected">字符串</option>
                                                <option value="1">FVP巴枪</option>
                                            </select>
                                        </div>
                                    </div>
                                    <div>
                                      <div style=" margin-top: 10px; margin-bottom: 10px;">
                                                                                                                                <strong>读取条数：</strong></div>
                                     <div class="input-group col-md-12 col-xs-12 col-lg-12 col-sm-12" >
                                         <input type="number" class="form-control" name="maxSize"
                                             id="maxSize" 
                                             value="100"
                                             aria-required="true">
                                     </div>
                                    </div>
                                    <div style="margin-top: 10px; margin-bottom: 10px;">
                                                                                                                          <strong>返回结果：</strong><span id="numWrap" style="display:none;">条数(<span id="num"></span>)</span></div>
                                    <div id="response" style="height:250px;overflow-y:scroll;border:1px solid #ccc;">
                                    </div>
                                    </div>
                                </form>
                            </div>

                        </div>

                        <div class="modal-footer">
                            <span class="pull-left">
                                <button type="button" class="btn btn-default"
                                    data-dismiss="modal">关闭</button>
                                <span class="text-danger"></span>
                            </span> <span class="pull-right">
                                <button type="button" class="btn btn-info" onclick="$.kafkaReadManagerUtils.submit.fetchKafka();">读取</button>
                                <button type="button" class="btn btn-primary" id="saveBtn">保存</button>
                            </span>
                        </div>

                    </div>
                </div>

            </div>
            
           <div class="modal fade bs-example-modal-lg" id="displayResponseDialog" role="dialog"
                aria-hidden="true" data-backdrop="static">
                <div class="modal-dialog modal-lg">
                    <div class="modal-content">
                        <div class="modal-header">
                            <button type="button" class="close" data-dismiss="modal"
                                aria-hidden="true">&times;</button>
                            <h4 class="modal-title">报文内容</h4>
                        </div>
                        <div class="modal-body" style="padding-top:0px;">
                            <textarea spellcheck="false" name="message" class="form-control" style="overflow-x: scroll"
                                                rows="20" id="responseContent"></textarea>
                        </div>
                    </div>
                </div>

            </div>
        </div>
    </div>
</div>

<script src="../assets/js/kafkaReadManager.js"></script>
