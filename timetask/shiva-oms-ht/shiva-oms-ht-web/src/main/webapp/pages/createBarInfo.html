<section class="content-header">
	<h1>
		巴枪生成<small>生成巴枪</small>
	</h1>
	<ol class="breadcrumb">
		<li><a href="#"><i class="fa fa-home"></i> 首页</a></li>
		<li><a href="#"><i class="fa fa-tasks"></i> 巴枪生成</a></li>
		<li class="active"><i class="fa fa-gears"></i> 生成巴枪</li>
	</ol>
</section>
<div class="content">
	<div class="panel-body">
		<div class="panel panel-default">
			<div class="panel-body">
				<ul id="myTab" class="nav nav-tabs">
					<li class="active"><a href="#simpleCreate" data-toggle="tab">简单生成</a>
					</li>
					<li><a href="#allJsonCreate" data-toggle="tab">全量报文生成</a></li>
				</ul>
				<div id="myTabContent" class="tab-content">
					<div class="tab-pane fade in active" id="simpleCreate">
						<form role="form-horizontal" id="simpleCreateForm">
							<table class="table table-bordered table-condensed"
								style="width: 65%; margin-top: 18px;">
								<tr>
									<td style="width: 80px;">运单号</td>
									<td colspan="2">
										<div class="form-group">
											<input type="text" name="waybillNo"
												style="width: 60%; float: left" required
												placeholder="必填" class="form-control">
											<button type="button" style="float: left; margin-left: 20px;"
												onclick="$.barCreate.generateWaybillNo()" class="btn-link">随机生成</button>
											<button type="button" style="float: left; margin-left: 20px;"
                                                onclick="$.barCreate.generateBarCodeByNo()" class="btn-link">生成条形码</button>
										</div>
									</td>
								</tr>
								<tr>
                                    <td>条形码</td>
                                    <td colspan="2"><img id="barCode" /></td>
                                </tr>
								<tr>
									<td rowspan="12">巴枪操作</td>
									<td style="width: 120px;">快捷操作</td>
									<td>
										<div id="basicOperation" class="btn-group" style="float: left">
											<button type="button" class="btn-link"
												onclick="$.barCreate.button.quickFillBarOper(50)">收件</button>
											<button type="button" class="btn-link"
												onclick="$.barCreate.button.quickFillBarOper(30)">装车</button>
											<button type="button" class="btn-link"
												onclick="$.barCreate.button.quickFillBarOper(31)">卸车</button>
											<button type="button" class="btn-link"
												onclick="$.barCreate.button.quickFillBarOper(44)">出仓</button>
											<button type="button" class="btn-link"
												onclick="$.barCreate.button.quickFillBarOper(80)">妥投</button>
										</div>
										<button type="button" style="float: left; margin-left: 16px;"
											onclick="$('#additionalOperation').show();$(this).hide();"
											class="btn btn-primary btn-sm">更多</button>
										<div id="additionalOperation"
											style="display: none; float: left;" class="btn-group">
											<button type="button" class="btn-link"
												onclick="$.barCreate.button.quickFillBarOper(51)">一票多件</button>
											<button type="button" class="btn-link"
												onclick="$.barCreate.button.quickFillBarOper(43)">收件入仓</button>
											<button type="button" class="btn-link"
												onclick="$.barCreate.button.quickFillBarOper(33)">滞留入仓</button>
											<button type="button" class="btn-link"
												onclick="$.barCreate.button.quickFillBarOper(99)">转寄退回</button>
											<button type="button" class="btn-link"
												onclick="$.barCreate.button.quickFillBarOper(70)">异常</button>
											<button type="button" class="btn-link"
												onclick="$.barCreate.button.quickFillBarOper(648)">新旧运单关联</button>
										</div>
									</td>
								</tr>
								<tr>
									<td>巴枪操作码</td>
									<td><input type="text" name="opCode" class="form-control"
										style="width: 60%" maxlength="10"
										onkeyup="value=value.replace(/[^0-9]/g,'')" required
										placeholder="必填，请按照公司标准巴枪操作码输入"></td>
								</tr>
								<tr>
									<td>操作网点</td>
									<td><input type="text" name="sourceDeptCode"
										class="form-control" maxlength="10" style="width: 60%"
										onkeyup="value=value.replace(/[\W]/g,'')" required
										placeholder="必填，请输入公司标准网点代码"></td>
								</tr>
								<tr>
									<td>容器号</td>
									<td><input type="text" name="contnrCode"
										class="form-control" style="width: 60%; float: left;">
										<button type="button" class="btn-link"
											onclick="$.barCreate.generateContnrCode()"
											style="float: left; margin-left: 20px;">随机生成</button></td>
								</tr>
								<tr>
                                	<td>操作对象类型</td>
                                	<td><input type="text" class="form-control" value="20"
                                        style="width: 60%" name="objTypeCode" placeholder="20-运单;30-容器"></td>
                                </tr>
								<tr>
									<td>巴枪操作辅助码</td>
									<td><input type="text" name="opAttachInfo" style="width: 60%" class="form-control"
									   placeholder="巴枪-实际意义(90-数据类型;99-目的地代码;51,701-母单号;其他-线路)"></td>
								</tr>
								<tr>
									<td>问题件代码</td>
									<td><input type="text" name="stayWhyCode"
										style="width: 60%" class="form-control"></td>
								</tr>
								<tr>
									<td>目的地代码</td>
									<td><input type="text" name="phoneZone" style="width: 60%"
										class="form-control"></td>
								</tr>
								<tr>
									<td>收派员工号</td>
									<td><input type="text" name="courierCode"
										style="width: 60%" class="form-control" value="000212"></td>
								</tr>
								<tr>
									<td>巴枪扫描时间</td>
									<td><input id="barDatetimepicker" type="text"
										name="barScanTm" style="width: 60%"
										placeholder="必填，格式为yyyy-mm-dd hh:MM:ss" class="form-control"></td>
								</tr>
								<tr>
                                    <td>操作人员工号</td>
                                    <td><input type="text" class="form-control" value="000212"
                                        style="width: 60%" name="barOprCode" placeholder="必填，请输入操作人员工号"></td>
                                </tr>
                                <tr>
                                	<td>系统来源</td>
                                	<td><input type="text" class="form-control" value="sgs-core"
                                        style="width: 60%" name="barSn" placeholder="请输入系统来源"></td>
                                </tr>
								<tr id="moreTableOption">
									<td></td>
									<td><button type="button" class="btn btn-primary btn-sm"
											onclick="$('tr').show();$('#moreTableOption').hide();">更多选项</button></td>
									<td></td>
								</tr>
								<tr style="display: none">
									<td></td>
									<td>附加扩展字段</td>
									<td id="extendAttachCell">
										<div class="extend-attach-group">
											<select class="form-control"
												style="float: left; width: 130px;">
												<option value="">----------</option>
											</select> <input type="text" class="form-control"
												style="float: left; width: 35%;">
											<button type="button" class="btn-link btn-sm"
												onclick="$.barCreate.button.cloneExtendAttachGroup()"
												style="float: left; margin-left: 20px;">
												<span class="glyphicon glyphicon-plus"></span>
											</button>
											<button type="button" style="color: #c9302c; float: left;"
												onclick="$.barCreate.button.removeExtendAttachGroup(this)"
												class="btn-link btn-sm">
												<span class="glyphicon glyphicon-minus"></span>
											</button>
											<div style="clear: both"></div>
										</div>
									</td>
								</tr>
								<tr>
									<td colspan="3"><button type="button" class="btn btn-info"
											onclick="$.barCreate.submit.simpleCreateBar()">生成巴枪</button></td>
								</tr>
							</table>
						</form>
					</div>
					<div class="tab-pane fade" id="allJsonCreate">
						<div class="input-group col-md-12 col-xs-12 col-lg-12 col-sm-12"
							style="margin-bottom: 10px; margin-top: 10px">
							<button type="button" id="templateSelectButton"
								class="btn btn-info mg-2-5" style="background-color: #428cb1;"
								onclick="$.barCreate.button.templateSelect()">巴枪报文模板管理</button>
						</div>
						<form role="form" id="allJsonCreateForm">
							<div class="input-group col-md-12 col-xs-12 col-lg-12 col-sm-12"
								style="margin-bottom: 10px;">
								<div class="input-group-addon" style="width: 100px;">json报文</div>
								<div class="form-group">
									<textarea class="form-control" spellcheck="false" rows="25" name="allJson"
										id="allJson" style="width: 80%" required
										placeholder="必填，请填格式正确的Json报文"></textarea>
								</div>
							</div>
							<div class="input-group col-md-12 col-xs-12 col-lg-12 col-sm-12"
								style="margin-bottom: 10px;">
								<button type="button" id="allJsonCreateButton"
									class="btn btn-info mg-2-5" style="background-color: #428cb1;"
									onclick="$.barCreate.submit.allJsonCreate()">生成</button>
							</div>
						</form>
					</div>
				</div>
			</div>
		</div>
	</div>
	<!-- 模板管理 begin -->
	<div class="modal fade" id="templateSelectDialog" role="dialog"
		aria-hidden="true" data-backdrop="static">
		<div class="modal-dialog" style="width: auto; height: auto;">
			<div class="modal-content">
				<div class="modal-header">
					<button type="button" class="close" data-dismiss="modal"
						aria-hidden="true">&times;</button>
					<h4 class="modal-title">巴枪报文模板管理</h4>
				</div>
				<div class="modal-body">
					<div class="row-fluid">
						<button type="button" id="templateAddButton"
							class="btn btn-primary"
							onclick="$.barCreate.button.templateAdd()">新增</button>
						<!-- table begin -->
						<div class="row">
							<div
								class="col-md-12 col-xs-12 col-lg-12 col-sm-12 panel-default">
								<div class="panel panel-body">
									<div class="panel-content">
										<table id="barTemplateTable" data-toggle="table"
											data-page-list="[10,20,30,ALL]" data-pagination="true"
											data-cache="false" data-detail-view="false"
											data-show-refresh="true" data-show-columns="false"
											data-filter-control="false" data-filter-show-clear="false"
											data-toolbar="#barTemplateTableToolbar"
											data-side-pagination="server">
											<thead>
												<tr>
													<th class="hidden" data-field="id"></th>
													<th data-field="templateName" data-align="center"
														data-width="10%">模板名称</th>
													<th data-field="templateContent" data-align="center"
														data-width="70%">模板内容</th>
													<th data-field="operation" data-align="center"
														data-width="20%"
														data-formatter="$.barCreate.formatter.operation">操作</th>
												</tr>
											</thead>
										</table>
									</div>
								</div>
							</div>
						</div>
						<!-- table end-->
					</div>
					<div class="modal-footer">
						<button type="button" class="btn btn-default" data-dismiss="modal">关闭</button>
					</div>
				</div>
			</div>
		</div>
		<!-- 模板管理 end -->

		<!-- 新增 begin -->
		<div class="modal fade" id="templateAddDialog" role="dialog"
			aria-hidden="true" data-backdrop="static">
			<div class="modal-dialog" style="width: 680px; height: 800px">
				<div class="modal-content">
					<div class="modal-header">
						<button type="button" class="close"
							onclick="$.barCreate.button.close('templateAddDialog')"
							aria-hidden="true">&times;</button>
						<h4 class="modal-title">新增</h4>
					</div>

					<div class="modal-body">
						<div class="row-fluid">
							<form class="form-horizontal" role="form" id="addTemplateForm"
								novalidate="novalidate">
								<div class="form-group">
									<label class="col-sm-3 control-label">模板名称:</label>
									<div class="col-sm-7">
										<input type="text" class="form-control" name="templateName"
											required placeholder="必填">
									</div>
								</div>
								<input type="hidden" name="templateType" value="fvpBar">
								<div class="form-group">
									<label class="col-sm-3 control-label">模板内容:</label>
									<div class="col-sm-7">
										<textarea rows="25" spellcheck="false" class="form-control"
											name="templateContent" required placeholder="必填"></textarea>
									</div>
								</div>
							</form>
						</div>
					</div>

					<div class="modal-footer">
						<button type="button" class="btn btn-default"
							onclick="$.barCreate.button.close('templateAddDialog')">关闭</button>
						<button type="button" class="btn btn-primary"
							onclick="$.barCreate.submit.addTemplate()">确定</button>
					</div>

				</div>
			</div>
		</div>
		<!-- 新增 end -->
		<!-- 查看 begin-->
		<div class="modal fade" id="templateShowDialog" role="dialog"
			aria-hidden="true" data-backdrop="static">
			<div class="modal-dialog" style="width: 680px; height: 800px">
				<div class="modal-content">
					<div class="modal-header">
						<button type="button" class="close"
							onclick="$.barCreate.button.close('templateShowDialog')"
							aria-hidden="true">&times;</button>
						<h4 class="modal-title">查看</h4>
					</div>

					<div class="modal-body">
						<div class="row-fluid">
							<form class="form-horizontal" role="form" id="showTemplateForm"
								novalidate="novalidate">
								<div class="form-group">
									<label class="col-sm-3 control-label">模板名称:</label>
									<div class="col-sm-7">
										<input type="text" class="form-control" name="templateName"
											readonly>
									</div>
								</div>

								<div class="form-group">
									<label class="col-sm-3 control-label">模板内容:</label>
									<div class="col-sm-7">
										<textarea rows="25" spellcheck="false" class="form-control"
											name="templateContent" readonly></textarea>
									</div>
								</div>
							</form>
						</div>
					</div>

					<div class="modal-footer">
						<button type="button" class="btn btn-default"
							onclick="$.barCreate.button.close('templateShowDialog')">关闭</button>
					</div>

				</div>
			</div>
		</div>
		<!-- 查看 end -->


		<!-- 修改 begin -->
		<div class="modal fade" id="templateUpdateDialog" role="dialog"
			aria-hidden="true" data-backdrop="static">
			<div class="modal-dialog" style="width: 680px; height: 800px">
				<div class="modal-content">
					<div class="modal-header">
						<button type="button" class="close"
							onclick="$.barCreate.button.close('templateUpdateDialog')"
							aria-hidden="true">&times;</button>
						<h4 class="modal-title">新增</h4>
					</div>

					<div class="modal-body">
						<div class="row-fluid">
							<form class="form-horizontal" role="form" id="updateTemplateForm"
								novalidate="novalidate">
								<input name="id" type="hidden" value="${id}">
								<div class="form-group">
									<label class="col-sm-3 control-label">模板名称:</label>
									<div class="col-sm-7">
										<input type="text" class="form-control" name="templateName"
											required placeholder="必填">
									</div>
								</div>

								<div class="form-group">
									<label class="col-sm-3 control-label">模板内容:</label>
									<div class="col-sm-7">
										<textarea rows="25" spellcheck="false" class="form-control"
											name="templateContent" required placeholder="必填"></textarea>
									</div>
								</div>
							</form>
						</div>
					</div>

					<div class="modal-footer">
						<button type="button" class="btn btn-default"
							onclick="$.barCreate.button.close('templateUpdateDialog')">关闭</button>
						<button type="button" class="btn btn-primary"
							onclick="$.barCreate.submit.updateTemplate()">确定</button>
					</div>

				</div>
			</div>
		</div>
		<!-- -->


		<!-- 删除 begin -->
		<div class="modal fade bs-example-modal-sm" id="deleteTemplateDialog"
			role="dialog" aria-hidden="true" data-backdrop="static">
			<div class="modal-dialog modal-sm">
				<div class="modal-content">
					<div class="modal-header">
						<button type="button" class="close"
							onclick="$.barCreate.button.close('deleteTemplateDialog')"
							aria-hidden="true">&times;</button>
						<h4 class="modal-title">删除</h4>
					</div>

					<div class="modal-body">
						<div class="row-fluid">
							<form class="form-horizontal" role="form" id="deleteTemplateForm"
								novalidate="novalidate">


								<input name="id" id="idForDel" type="hidden">

								<h3 class="text-danger text-center">请确认是否删除?</h3>
							</form>
						</div>

					</div>

					<div class="modal-footer">
						<div style="display: inline;">
							<button type="button" class="btn btn-default"
								onclick="$.barCreate.button.close('deleteTemplateDialog')">关闭</button>
							<button type="button" class="btn btn-danger"
								onclick="$.barCreate.submit.deleteByPrimaryKey()">确定</button>
						</div>
					</div>

				</div>
			</div>
		</div>
		<!-- 删除 end -->
	</div>


	<div class="modal fade bs-example-modal-lg" tabindex="-1" role="dialog"
		aria-labelledby="myLargeModalLabel">
		<div class="modal-dialog modal-lg" role="document">
			<div class="modal-content">
				<div class="modal-header">
					<button type="button" class="close" data-dismiss="modal"
						aria-label="Close">
						<span aria-hidden="true">&times;</span>
					</button>
					<h4 class="modal-title" id="myModalLabel">Modal title</h4>
				</div>
				<div class="modal-body">...</div>
				<div class="modal-footer">
					<button type="button" class="btn btn-default" data-dismiss="modal">Close</button>
					<button type="button" class="btn btn-primary">Save changes</button>
				</div>
			</div>
		</div>
	</div>
</div>

<style>
.table td {
	vertical-align: middle !important;
	text-align: center;
}
</style>
<script src="../assets/js/createBarInfo.js" type="text/javascript"></script>